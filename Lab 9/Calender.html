/*Nayab Javed 05122*/
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>


<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script>



var date1 = new Date();

		var weekday = new Array(7);
    weekday[0] = "Sunday";
    weekday[1] = "Monday";
    weekday[2] = "Tuesday";
    weekday[3] = "Wednesday";
    weekday[4] = "Thursday";
    weekday[5] = "Friday";
    weekday[6] = "Saturday";

var app = angular.module('myApp', []);
app.controller('calCtrl', function($scope, $http) {
	
	
	var curdate = new Date();
	curdate = date1;
	$scope.month=monthStr(curdate.getMonth()) + " " +curdate.getFullYear();
	var firstDay = new Date(curdate.getFullYear(), curdate.getMonth(), 1);
	var offset = firstDay.getDay();
	var st=0;
	
	
	var items = [];
	$scope.item1 = [];
	var totaldays = monthDays(curdate.getMonth());
	for(var i =1; i<= totaldays ; ){
		if(st>=offset){
		 items.push(angular.copy(""+i));
		 i++;}
		else{
			 items.push(angular.copy("."));
			 st++;
			}
		
   
	}
   $scope.names = items;
   $.getJSON( 'http://api.wunderground.com/api/3c1ec02ec24b437c/conditions/q/PK/Islamabad.json', function( data ) {
		document.getElementById('ele').innerHTML=""+data.current_observation.display_location.full+" "+data.current_observation.weather
		+" "+data.current_observation.temp_c;
		});
   
   
   $scope.next = function(){
	   		 var x = new Date();
 			 x.setDate(1);
		 	 x.setMonth(date1.getMonth()+1);
	//   alert(""+x.getDay());
	   date1 =x;
	   var curdate = new Date();
	curdate = date1;
	$scope.month=monthStr(curdate.getMonth()) + " " +curdate.getFullYear() ;
	var firstDay = new Date(curdate.getFullYear(), curdate.getMonth(), 1);
	var offset = firstDay.getDay();
	var st=0;
	
	strr = ".";
	items = [];
	$scope.item1 = [];
	var totaldays = monthDays(curdate.getMonth());
	for(var i =1; i<= totaldays ; ){
		if(st>=offset){
		 items.push(angular.copy(""+i));
		 i++;}
		else{
			strr = strr + strr;
			 items.push(angular.copy(""+strr));
			 st++;
			} 
	}
   $scope.names = items;
	   
	   }
   
      $scope.previous = function(){
	   		 var x = new Date();
 			 x.setDate(1);
		 	 x.setMonth(date1.getMonth()-1);
	 //  alert(""+x.getDay());
	   date1 =x;
	   var curdate = new Date();
	curdate = date1;
	$scope.month=monthStr(curdate.getMonth()) + " " +curdate.getFullYear() ;
	var firstDay = new Date(curdate.getFullYear(), curdate.getMonth(), 1);
	var offset = firstDay.getDay();
	var st=0;
	
	strr = ".";
	items = [];
	$scope.item1 = [];
	var totaldays = monthDays(curdate.getMonth());
	for(var i =1; i<= totaldays ; ){
		if(st>=offset){
		 items.push(angular.copy(""+i));
		 i++;}
		else{
			strr = strr + strr;
			 items.push(angular.copy(""+strr));
			 st++;
			} 
	}
   $scope.names = items;
	   
	   }
   
   
   
   
   
   
});

function monthStr(d) {
    var month = new Array();
    month[0] = "January";
    month[1] = "February";
    month[2] = "March";
    month[3] = "April";
    month[4] = "May";
    month[5] = "June";
    month[6] = "July";
    month[7] = "August";
    month[8] = "September";
    month[9] = "October";
    month[10] = "November";
    month[11] = "December";

    
    var n = month[d];
    return n;
}
function monthDays(d) {
    var month = new Array();
    month[0] = 31;
    month[1] = 28;
    month[2] = 31;
    month[3] = 30;
    month[4] = 31;
    month[5] = 30;
    month[6] = 31;
    month[7] = 31;
    month[8] = 31;
    month[9] = 31;
    month[10] = 30;
    month[11] = 31;

    
    var n = month[d];
    return n;
}
</script>
<style>
div{width:360px;
height:30px;

}


span{
	height:100%;
	width:50px;
	display:inline-block;
	margin:10px 0px 10px 0px;
	}
.day{
	width:45px;
}

i{
	
	padding:15px;
	width:30px;
	height:30px;
	}

#ele{ width:500px;
height:30px;
margin-top:300px;
 }

i{
	font-size:20px;
	background:#0CC;}
	
#title{
	background:#0CC;
	width:250px;
	}
</style>
</head>

<body ng-app="myApp" ng-controller="calCtrl" >


<div class="header"  >
    <i ng-click="previous()"> &lt; </i>
    <span id="title">  {{month}}  </span>
    <i ng-click="next()"> &gt; </i>
</div>
<div class="week">
    <span class="day">Sun</span>
    <span class="day">Mon</span>
    <span class="day">Tue</span>
    <span class="day">Wed</span>
    <span class="day">Thu</span>
    <span class="day">Fri</span>
    <span class="day">Sat</span>
</div>
<div>

    <span ng-repeat="x in names" >{{ x }}</span>

</div>
<span id="ele">

</span>
</body>
</html>
